# 信息收集

​       在渗透测试的过程中第一个要做的事情就是进行信息的收集，俗称“踩点”。而在渗透测试中“踩点”是指尽可能多的收集关于目标网络信息以找到多种入侵组织网络系统方法的过程。

​		踩点就是主动或被动获取信息的过程，而信息收集一般是通过扫描来实现，通过扫描可以发现远程服务的各种端口，提供的服务及版本等信息，而信息收集一般通过扫描来实现，通过扫描可以发现远程服务的各种端口、提供的服务及版本等信息，进而确定目标网络或组织的运作方式，然后就可以根据收集到的信息确定最佳的进攻方式，在这里需要注意的是要悄悄地进行不能让对方发现或者分析出我们的意图。

​		当然，我们在进行情报搜集的时候可以从网页的信息中进行收集，使用谷歌语法进行搜索，对目标的网络拓扑进行一个完整地扫描映射，这些工作会花费大量的事件进行，当然踩点的主要目的是要进行收集目标网络的信息，所以我们应该建立信息数据库，所以可以将踩点分为一下四个部分

-  了解安全架构

- 缩小攻击范围

- 建立信息数据库

- 绘制网络拓扑图

## 了解安全架构

​	在这个过程中我们要了解该公司使用了哪些安全设备，比如防火墙，waf等以前硬件或者软件的设备，防火墙的话使用的是哪个厂家的，哪个版本，然后我们就可以在网络上查找该防火墙的薄弱点进行相应的渗透，然后我们换需要了解到该公司的安全人员和网络管理人员的配置情况，如果只配置了网站的管理人员的话，我们是可以通过比较隐秘和迷惑性的方式来进行一个渗透

## 缩小攻击范围

​	我们可以通过获取目标公司的IP地址范围，网络，域名，子域名，远程访问点等信息来锁一下攻击范围，然后就可以确定哪些是敏感数据面临的风险，他们在哪里然后再我们后续的渗透中就可以针对薄弱点进行渗透

## 建立信息数据库

​		

渗透测试人员在通过信息收集与分析之后，能够建立针对测试目标组织安全性弱点信息数据库，然后可以通过这个信息数据库来采取下一步的入侵行动。

这个信息信息数据库里可能包含一些网站脆弱点的信息、同一服务器上临站的信息，以及一些其他的重要的信息。

eg：

| 信息        |             |
| ----------- | ----------- |
| 网址        | www.xxx.com |
| ip地址      | 10.2.7.9    |
| 是否使用cms | dedecms     |
| 网站端口    | 80          |

然后我们通过对收集的信息进行分析就可以绘制除目标的网络拓扑图，然后在进行分析，我们就可以找到最容易进行入侵的攻击路径



### IP资源

##### 获取真是IP地址

1，使用超级ping

2，对子域名进行超级ping

3，通过对域名的历史DNS解析信息，然后分析哪些IP不在现在的CDN中，就有可能是没有经过CDN加速的真是IP地址

##### 旁站信息收集

旁站是与攻击目标在同一服务器上的不同网站，当攻击目标没有漏洞的情况下，可以通过查找旁站的漏洞，通过攻击旁站，然后再通过提权拿到服务器的最高权限，这里可以使用NMAP这款工具，它探测目标主机所开放的端口、通过识别新的服务器审计网络的安全性、通过对设备或者防火墙的探测来审计它的安全性、探测网络上的主机

##### C端主机

C段主机是指与目标服务器在同一C段网络的服务器，攻击目标的C段存活主机是信息收集的重要信息，很多单位企业的内部服务器可能都会在一个C段网络中。

##### 域名发现

子域名信息收集

 可以使用layder子域名挖掘机对子域名进行收集

谷歌语法，site：域名

##### nmap检测

可以通过nmap检测目标主机是否在线，端口的开放情况，侦测运行的服务及版本的信息，侦测操作系统以及设备的类型等

nmap全端口扫描

  nmap -sV -p 1-65535 URL

##### whois查询

whois查询域名的一个信息

##### 网站关键信息的收集

###### 指纹识别

​		访问robots.txt 文件通过特定的路径判断CMS的类型

###### 指纹识别工具

wappalyzer

云悉指纹识别：地址：https://www.yunsee.cn/

##### 互联网资产收集

互联网资产，包括历史漏洞信息、GitHub源代码信息泄漏、SVN源代码信息

泄漏网盘文件信息等。

ZoomEye给出各大组件、服务器系统等存在的历史性漏洞的描述文档。

地址：https://www.zoomeye.org/topic?id=ics_project

##### GitHub信息泄露

GitHub是一个面向开源及私有软件项目的托管平台，很多人喜欢把自己的代码上传到平台托管。攻击者通过关键词进行搜索，可以找到关于目标站点的敏感信息，甚至可以下载网站源码。